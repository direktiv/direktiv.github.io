---
layout: default
title: Persistent Data
nav_order: 11
parent: Getting Started
---

# Persistent Data 

Direktiv supports storing and retrieving data that is persisted beyond the scope of a single state or workflow instance. In this article you'll learn about the different scopes and the states that can interact with them. 

## Demo 

```yaml 
id: counter 
states:
- id: a 
  type: getter 
  variables:
  - key: x 
    scope: workflow 
  transform: '.var.x += 1'
  transition: b 
- id: b 
  type: setter 
  variables: 
  - key: x 
    scope: workflow 
    value: '.var.x'
```

This demo increments a counter each time the workflow is executed. 

## Scopes 

There are three scopes for storing persistent data: `instance`, `workflow`, and `namespace`. 

Data stored in the `instance` scope only exists for the duration of the running workflow instance.

Data stored in the `workflow` scope exists until the workflow definition is deleted, and is accessible to all instances of that workflow.

Data stored in the `namespace` scope exists until the namespace itself is deleted, and is accessible to all instances of all workflows originating on that namespace. 

## Setter State

The Setter State can be used to store any number of variables. Each variable must be explicitly scoped, and the value stored for a variable is generated by the output of a `jq` query. 

```yaml 
- id: a
  type: setter 
  variables:
  - key: MyVar
    scope: namespace 
    value: '.x'
```

The only way to delete a stored value is to set it to `null`. 

## Getter State

The Getter State is used to retrieve any number of variables in persistent storage. Each variable must be explicitly scoped, and the value retrieved will be stored under `.var.KEY` where `KEY` is the variable's name. 

```yaml 
- id: a
  type: getter 
  variables:
  - key: x
    scope: namespace 
```

A key doesn't need to exist in storage to return successfully, but the value returned will be `null` if it doesn't exist. 

## Concurrency

Direktiv makes no effort to guarantee any thread-safety on persistent data. Multiple instances that interact with the same variable may have inconsistent results. 
