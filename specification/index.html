
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Direktiv Documentation">
      
      
      
      
        <link rel="canonical" href="https://docs.direktiv.io/specification/">
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Specification - Direktiv</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="white">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#specification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Direktiv" class="md-header__button md-logo" aria-label="Direktiv" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Direktiv
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Specification
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/direktiv/direktiv/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Quickstart
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../getting_started/helloworld/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../installation/" class="md-tabs__link">
        Installation
      </a>
    </li>
  

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Specification
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../api/" class="md-tabs__link">
      API
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../environment/direktiv-development-environment/" class="md-tabs__link">
        Development
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../examples/greeting/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../events/" class="md-tabs__link">
        Events
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Direktiv" class="md-nav__button md-logo" aria-label="Direktiv" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    Direktiv
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/direktiv/direktiv/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Quickstart
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/helloworld/" class="md-nav__link">
        Helloworld
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/transitions/" class="md-nav__link">
        Transitions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/conditional-transitions/" class="md-nav__link">
        Conditional Transitions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/transforms/" class="md-nav__link">
        Transforms & JQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/functions-intro/" class="md-nav__link">
        Introduction to Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/scheduling/" class="md-nav__link">
        Scheduling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/subflows/" class="md-nav__link">
        Subflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/events/" class="md-nav__link">
        Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/error-handling/" class="md-nav__link">
        Error Handling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/secrets-registries/" class="md-nav__link">
        Secrets & Registries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/making-functions/" class="md-nav__link">
        Making Custom Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/persistent-data/" class="md-nav__link">
        Persistent Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/using-functions/" class="md-nav__link">
        Using Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/isolated-functions/" class="md-nav__link">
        Isolated Functions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../installation/">Installation</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/kubernetes/" class="md-nav__link">
        Kubernetes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/linkerd/" class="md-nav__link">
        Linkerd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/database/" class="md-nav__link">
        Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/direktiv/" class="md-nav__link">
        Direktiv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/summary/" class="md-nav__link">
        Quick Install
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Specification
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Specification
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workflow-overview-diagram" class="md-nav__link">
    Workflow Overview Diagram
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-definition" class="md-nav__link">
    Workflow Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functiondefinition" class="md-nav__link">
    FunctionDefinition
  </a>
  
    <nav class="md-nav" aria-label="FunctionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#globalfunctiondefinition" class="md-nav__link">
    GlobalFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespacedfunctiondefinition" class="md-nav__link">
    NamespacedFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusablefunctiondefinition" class="md-nav__link">
    ReusableFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subflowfunctiondefinition" class="md-nav__link">
    SubflowFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolatedfunctiondefinition" class="md-nav__link">
    IsolatedFunctionDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functionfiledefinition" class="md-nav__link">
    FunctionFileDefinition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    States
  </a>
  
    <nav class="md-nav" aria-label="States">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-fields" class="md-nav__link">
    Common Fields
  </a>
  
    <nav class="md-nav" aria-label="Common Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#errordefinition" class="md-nav__link">
    ErrorDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actionstate" class="md-nav__link">
    ActionState
  </a>
  
    <nav class="md-nav" aria-label="ActionState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#actiondefinition" class="md-nav__link">
    ActionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrydefinition" class="md-nav__link">
    RetryDefinition
  </a>
  
    <nav class="md-nav" aria-label="RetryDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consumeeventstate" class="md-nav__link">
    ConsumeEventState
  </a>
  
    <nav class="md-nav" aria-label="ConsumeEventState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consumeeventdefinition" class="md-nav__link">
    ConsumeEventDefinition
  </a>
  
    <nav class="md-nav" aria-label="ConsumeEventDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_1" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delaystate" class="md-nav__link">
    DelayState
  </a>
  
    <nav class="md-nav" aria-label="DelayState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_2" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errorstate" class="md-nav__link">
    ErrorState
  </a>
  
    <nav class="md-nav" aria-label="ErrorState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_3" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventandstate" class="md-nav__link">
    EventAndState
  </a>
  
    <nav class="md-nav" aria-label="EventAndState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_4" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventxorstate" class="md-nav__link">
    EventXorState
  </a>
  
    <nav class="md-nav" aria-label="EventXorState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eventconditiondefinition" class="md-nav__link">
    EventConditionDefinition
  </a>
  
    <nav class="md-nav" aria-label="EventConditionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_5" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreachstate" class="md-nav__link">
    ForeachState
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generateeventstate" class="md-nav__link">
    GenerateEventState
  </a>
  
    <nav class="md-nav" aria-label="GenerateEventState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generateeventdefinition" class="md-nav__link">
    GenerateEventDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getterstate" class="md-nav__link">
    GetterState
  </a>
  
    <nav class="md-nav" aria-label="GetterState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variablegetterdefinition" class="md-nav__link">
    VariableGetterDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noopstate" class="md-nav__link">
    NoopState
  </a>
  
    <nav class="md-nav" aria-label="NoopState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_6" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallelstate" class="md-nav__link">
    ParallelState
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setterstate" class="md-nav__link">
    SetterState
  </a>
  
    <nav class="md-nav" aria-label="SetterState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variablesetterdefinition" class="md-nav__link">
    VariableSetterDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switchstate" class="md-nav__link">
    SwitchState
  </a>
  
    <nav class="md-nav" aria-label="SwitchState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#switchconditiondefinition" class="md-nav__link">
    SwitchConditionDefinition
  </a>
  
    <nav class="md-nav" aria-label="SwitchConditionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_7" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validatestate" class="md-nav__link">
    ValidateState
  </a>
  
    <nav class="md-nav" aria-label="ValidateState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_8" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timeoutdefinition" class="md-nav__link">
    TimeoutDefinition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start" class="md-nav__link">
    Start
  </a>
  
    <nav class="md-nav" aria-label="Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scheduledstartdefinition" class="md-nav__link">
    ScheduledStartDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventstartdefinition" class="md-nav__link">
    EventStartDefinition
  </a>
  
    <nav class="md-nav" aria-label="EventStartDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starteventdefinition" class="md-nav__link">
    StartEventDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsxorstartdefinition" class="md-nav__link">
    EventsXorStartDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsandstartdefinition" class="md-nav__link">
    EventsAndStartDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environment/direktiv-development-environment/" class="md-nav__link">
        Standalone Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environment/direktiv-vscode/" class="md-nav__link">
        VSCode Extension
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/greeting/" class="md-nav__link">
        Greeting (ActionState)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/event-based-greeting/" class="md-nav__link">
        Event-based Greeting (StartEvent)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/solving-math-expressions/" class="md-nav__link">
        Solving Math Expressions (Foreach)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/parallel-execution/" class="md-nav__link">
        Parallel Execution (Parallel)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/event-based-transition/" class="md-nav__link">
        Check Credit Score (ConsumeEvent)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/non-json-input/" class="md-nav__link">
        Handling Non-JSON Input
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/create-vm-set-dns/" class="md-nav__link">
        Create VM and DNS Record
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/respond-to-events/" class="md-nav__link">
        Reacting to Consuming Cloud Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/website-change/" class="md-nav__link">
        Check for Website Change
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/terraform-and-ansible/" class="md-nav__link">
        Terraform or Ansible
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/using-terraform-plugin/" class="md-nav__link">
        Running Terraform Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/md-translation/" class="md-nav__link">
        Convert Markdown to Multiple Languages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/check-email-for-intent/" class="md-nav__link">
        Check Email for Intent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/automatically-blur-nsfw-images/" class="md-nav__link">
        Blur a NSFW Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/regex-check-for-mobile/" class="md-nav__link">
        Check Email for Mobile Number
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/git-clone-go-build/" class="md-nav__link">
        Git Clone and Go Build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/scheduled-example/" class="md-nav__link">
        Scheduling (ScheduledStartType)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/start-example/" class="md-nav__link">
        Event Listener (EventStartType)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/start-event-and-example/" class="md-nav__link">
        EventAnd Listener (EventAndStartType)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/start-event-xor-example/" class="md-nav__link">
        EventXor Listener (EventXorStartType)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../examples/variable-mime-types/" class="md-nav__link">
        Variable Mimetypes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../events/">Events</a>
          
            <label for="__nav_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Events" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Events
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_2" type="checkbox" id="__nav_8_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../events/cloud/">Cloud</a>
          
            <label for="__nav_8_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Cloud" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          Cloud
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/cloud/amazon/" class="md-nav__link">
        Amazon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/cloud/azure/" class="md-nav__link">
        Azure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/cloud/gcp/" class="md-nav__link">
        Google Cloud Platform
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_3" type="checkbox" id="__nav_8_3" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_3">
          Knative
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Knative" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_3">
          <span class="md-nav__icon md-icon"></span>
          Knative
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/knative/knative/" class="md-nav__link">
        Eventing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/knative/example/" class="md-nav__link">
        Kafka Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#workflow-overview-diagram" class="md-nav__link">
    Workflow Overview Diagram
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-definition" class="md-nav__link">
    Workflow Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functiondefinition" class="md-nav__link">
    FunctionDefinition
  </a>
  
    <nav class="md-nav" aria-label="FunctionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#globalfunctiondefinition" class="md-nav__link">
    GlobalFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#namespacedfunctiondefinition" class="md-nav__link">
    NamespacedFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusablefunctiondefinition" class="md-nav__link">
    ReusableFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subflowfunctiondefinition" class="md-nav__link">
    SubflowFunctionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#isolatedfunctiondefinition" class="md-nav__link">
    IsolatedFunctionDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functionfiledefinition" class="md-nav__link">
    FunctionFileDefinition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#states" class="md-nav__link">
    States
  </a>
  
    <nav class="md-nav" aria-label="States">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-fields" class="md-nav__link">
    Common Fields
  </a>
  
    <nav class="md-nav" aria-label="Common Fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#errordefinition" class="md-nav__link">
    ErrorDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#actionstate" class="md-nav__link">
    ActionState
  </a>
  
    <nav class="md-nav" aria-label="ActionState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#actiondefinition" class="md-nav__link">
    ActionDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrydefinition" class="md-nav__link">
    RetryDefinition
  </a>
  
    <nav class="md-nav" aria-label="RetryDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consumeeventstate" class="md-nav__link">
    ConsumeEventState
  </a>
  
    <nav class="md-nav" aria-label="ConsumeEventState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consumeeventdefinition" class="md-nav__link">
    ConsumeEventDefinition
  </a>
  
    <nav class="md-nav" aria-label="ConsumeEventDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_1" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delaystate" class="md-nav__link">
    DelayState
  </a>
  
    <nav class="md-nav" aria-label="DelayState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_2" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errorstate" class="md-nav__link">
    ErrorState
  </a>
  
    <nav class="md-nav" aria-label="ErrorState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_3" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventandstate" class="md-nav__link">
    EventAndState
  </a>
  
    <nav class="md-nav" aria-label="EventAndState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_4" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventxorstate" class="md-nav__link">
    EventXorState
  </a>
  
    <nav class="md-nav" aria-label="EventXorState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eventconditiondefinition" class="md-nav__link">
    EventConditionDefinition
  </a>
  
    <nav class="md-nav" aria-label="EventConditionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_5" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreachstate" class="md-nav__link">
    ForeachState
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generateeventstate" class="md-nav__link">
    GenerateEventState
  </a>
  
    <nav class="md-nav" aria-label="GenerateEventState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generateeventdefinition" class="md-nav__link">
    GenerateEventDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getterstate" class="md-nav__link">
    GetterState
  </a>
  
    <nav class="md-nav" aria-label="GetterState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variablegetterdefinition" class="md-nav__link">
    VariableGetterDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noopstate" class="md-nav__link">
    NoopState
  </a>
  
    <nav class="md-nav" aria-label="NoopState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_6" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallelstate" class="md-nav__link">
    ParallelState
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setterstate" class="md-nav__link">
    SetterState
  </a>
  
    <nav class="md-nav" aria-label="SetterState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variablesetterdefinition" class="md-nav__link">
    VariableSetterDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switchstate" class="md-nav__link">
    SwitchState
  </a>
  
    <nav class="md-nav" aria-label="SwitchState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#switchconditiondefinition" class="md-nav__link">
    SwitchConditionDefinition
  </a>
  
    <nav class="md-nav" aria-label="SwitchConditionDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_7" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validatestate" class="md-nav__link">
    ValidateState
  </a>
  
    <nav class="md-nav" aria-label="ValidateState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#an-example-definition_8" class="md-nav__link">
    An example definition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timeoutdefinition" class="md-nav__link">
    TimeoutDefinition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start" class="md-nav__link">
    Start
  </a>
  
    <nav class="md-nav" aria-label="Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scheduledstartdefinition" class="md-nav__link">
    ScheduledStartDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventstartdefinition" class="md-nav__link">
    EventStartDefinition
  </a>
  
    <nav class="md-nav" aria-label="EventStartDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starteventdefinition" class="md-nav__link">
    StartEventDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsxorstartdefinition" class="md-nav__link">
    EventsXorStartDefinition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsandstartdefinition" class="md-nav__link">
    EventsAndStartDefinition
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/direktiv/direktiv/edit/master/docs/specification.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="specification">Specification</h1>
<h2 id="workflow-overview-diagram">Workflow Overview Diagram</h2>
<p>The diagram below captures the workflow definition specification. This is to be used as a reference only, the full specification is described in detail in the sections below.</p>
<p align=center>
<img src="../assets/direktiv-specification-nontransparent.png" alt="direktiv-specification"/>
</p>

<h2 id="workflow-definition">Workflow Definition</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Workflow unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>name</td>
<td>Workflow name (metadata).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>description</td>
<td>Workflow description (metadata).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>version</td>
<td>Version information.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>singular</td>
<td>Attempts to invoke this workflow will fail when an instance is running.</td>
<td>no</td>
<td>bool</td>
</tr>
<tr>
<td>functions</td>
<td>Workflow function definitions.</td>
<td><a href="#functiondefinition">[]FunctionDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>states</td>
<td>Workflow states.</td>
<td><a href="#states">[]StateDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>timeouts</td>
<td>Workflow global timeouts.</td>
<td><a href="#timeoutdefinition">TimeoutDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>start</td>
<td>Workflow start configuration.</td>
<td><a href="#start">Start</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h2 id="functiondefinition">FunctionDefinition</h2>
<h3 id="globalfunctiondefinition">GlobalFunctionDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Function definition unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>Type of function ("knative-global").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>service</td>
<td>The service being referenced.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>files</td>
<td>Workflow file definition.</td>
<td><a href="#functionfiledefinition">[]FunctionFileDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h3 id="namespacedfunctiondefinition">NamespacedFunctionDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Function definition unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>Type of function ("knative-namespace").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>service</td>
<td>The service being referenced.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>files</td>
<td>Workflow file definition.</td>
<td><a href="#functionfiledefinition">[]FunctionFileDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h3 id="reusablefunctiondefinition">ReusableFunctionDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Function definition unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>Type of function ("reusable").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>image</td>
<td>Image URI.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>files</td>
<td>Workflow file definition.</td>
<td><a href="#functionfiledefinition">[]FunctionFileDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>cmd</td>
<td>Command to run in container</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>size</td>
<td>Size of virtual machine</td>
<td>enum</td>
<td>no</td>
</tr>
<tr>
<td>scale</td>
<td>Minimum number of instances</td>
<td>int</td>
<td>no</td>
</tr>
</tbody>
</table>
<p>A reusable function can be defined in three different sizes: "<strong>small</strong>"(default), "<strong>medium</strong>", and "<strong>large</strong>". These sizes control how much cpu, memory and storage a virtual machine is given for a function when their virtual machine is created.</p>
<p>The default value for "<strong>scale</strong>" is 0 which means the service will be removed after a ceratin amount of time. It defines the minimum number of containers to run for this services if it is greater than 0.</p>
<table>
<thead>
<tr>
<th>Size</th>
<th>CPU</th>
<th>Memory</th>
<th>Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td>small</td>
<td>1</td>
<td>256 MB</td>
<td>+64 MB</td>
</tr>
<tr>
<td>medium</td>
<td>1</td>
<td>512 MB</td>
<td>+64 MB</td>
</tr>
<tr>
<td>large</td>
<td>2</td>
<td>1024 MB</td>
<td>+64 MB</td>
</tr>
</tbody>
</table>
<h3 id="subflowfunctiondefinition">SubflowFunctionDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Function definition unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>Type of function ("subflow").</td>
<td>enum</td>
<td>yes</td>
</tr>
<tr>
<td>workflow</td>
<td>ID of workflow within the same namespace.</td>
<td>string</td>
<td>yes</td>
</tr>
</tbody>
</table>
<h3 id="isolatedfunctiondefinition">IsolatedFunctionDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Function definition unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>Type of function ("isolated").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>image</td>
<td>Image URI.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>files</td>
<td>Workflow file definition.</td>
<td><a href="#functionfiledefinition">[]FunctionFileDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>cmd</td>
<td>Command to run in container</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>size</td>
<td>Size of virtual machine</td>
<td>enum</td>
<td>no</td>
</tr>
<tr>
<td>scale</td>
<td>Minimum number of instances</td>
<td>int</td>
<td>no</td>
</tr>
</tbody>
</table>
<p>An isolated function can be defined in three different sizes: "<strong>small</strong>"(default), "<strong>medium</strong>", and "<strong>large</strong>". These sizes control how much cpu, memory and storage a virtual machine is given for a function when their virtual machine is created.</p>
<p>The default value for "<strong>scale</strong>" is 0 which means the service will be removed after a ceratin amount of time. It defines the minimum number of containers to run for this services if it is greater than 0.</p>
<table>
<thead>
<tr>
<th>Size</th>
<th>CPU</th>
<th>Memory</th>
<th>Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td>small</td>
<td>1</td>
<td>256 MB</td>
<td>+64 MB</td>
</tr>
<tr>
<td>medium</td>
<td>1</td>
<td>512 MB</td>
<td>+64 MB</td>
</tr>
<tr>
<td>large</td>
<td>2</td>
<td>1024 MB</td>
<td>+64 MB</td>
</tr>
</tbody>
</table>
<h2 id="functionfiledefinition">FunctionFileDefinition</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>Key used to select variable.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>scope</td>
<td>Scope used to select variable. Defaults to 'instance', but can be 'workflow' or 'namespace'.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>as</td>
<td>Set the filename of the file. The default is the same as the key.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>type</td>
<td>How to treat the file. Options include 'plain', 'base64', 'tar', 'tar.gz'.</td>
<td>string</td>
<td>no</td>
</tr>
</tbody>
</table>
<h2 id="states">States</h2>
<h3 id="common-fields">Common Fields</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>log</td>
<td><code>jq</code> command to generate data for instance-logging.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<p>The <code>id</code> field must be unique amongst all states in the workflow, and may consist of only alphanumeric characters as well as periods, dashes, and underscores.</p>
<p>The <code>transform</code> field can be a <code>jq</code> command string applied to the state information in order to enrich, filter, or change it. Whatever the command resolves to will completely replace the state's information. The <code>transform</code> will be applied immediately before the <code>transition</code>, so it won't change the state information before the main function of the state is performed.</p>
<p>The <code>transition</code>, if provided, must be set to the <code>id</code> of a state within the workflow. If left unspecified, reaching this transition will end the workflow without raising an error.</p>
<h4 id="errordefinition">ErrorDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>A glob pattern to test error codes for a match.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
</tbody>
</table>
<p>The <code>error</code> parameter can be a glob pattern to match multiple types of errors. When an error is thrown it will be compared against each ErrorDefinition in order until it finds a match. If no matches are found the workflow will immediately abort and escalate the error to any caller, unless the retry policy is ready to take over.</p>
<h3 id="actionstate">ActionState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("action").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>action</td>
<td>Action to perform.</td>
<td><a href="#actiondefinition">ActionDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>async</td>
<td>If workflow execution can continue without waiting for the action to return.</td>
<td>boolean</td>
<td>no</td>
</tr>
<tr>
<td>timeout</td>
<td>Duration to wait for action to complete (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="actiondefinition">ActionDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>function</td>
<td>Name of the referenced function.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>input</td>
<td><code>jq</code> command to generate the input for the action.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>secrets</td>
<td>List of secrets to temporarily add to the state data under <code>.secrets</code> before running the input <code>jq</code> command.</td>
<td>[]string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="retrydefinition">RetryDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>max_attempts</td>
<td>Maximum number of retry attempts.</td>
<td>int</td>
<td>yes</td>
</tr>
<tr>
<td>delay</td>
<td>Time delay between retry attempts (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>multiplier</td>
<td>Value by which the delay is multiplied after each attempt.</td>
<td>float</td>
<td>no</td>
</tr>
<tr>
<td>codes</td>
<td>Regex patterns to specify which error codes to catch.</td>
<td>[]string</td>
<td>yes</td>
</tr>
</tbody>
</table>
<p>If a <code>retry</code> strategy is defined, the action will be retried on any failures that statify any of the regex <code>codes</code>. If the retry fails <code>max_attempts</code> times a <code>direktiv.retries.exceeded</code> error will be thrown.</p>
<h5 id="an-example-definition">An example definition</h5>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">insert-into-database</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">action</span>
  <span class="nt">action</span><span class="p">:</span>
    <span class="nt">function</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">insert-into-database-function</span>
    <span class="nt">input</span><span class="p">:</span>
      <span class="nt">customer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.customer)</span>
</code></pre></div>
<p>The Action State runs another workflow as a subflow, or a function as defined in the <code>functions</code> section of the workflow definition. Functions may include things such as containers or direktiv virtual-machines.</p>
<p>The input for the action is determined by an optional <code>jq</code> command in the <code>input</code> field. If unspecified, the default command is <code>"."</code>, which duplicates the entire state data.</p>
<p>After the action has returned, whatever the results were will be stored in the state information under <code>return</code>. If an error occurred, it will be automatically raised, and can be handled using <code>catch</code>, or ignored if the desired behaviour is to abort the workflow.</p>
<p>If <code>async</code> is <code>true</code>, the workflow will not wait for it to return before transitioning to the next state. The action will be fire-and-forget, and considered completely detached from the calling workflow. In this case, the Action State will not set the <code>return</code> value.</p>
<h3 id="consumeeventstate">ConsumeEventState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("consumeEvent").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>event</td>
<td>Event to consume.</td>
<td><a href="#consumeeventdefinition">ConsumeEventDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>timeout</td>
<td>Duration to wait to receive event (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="consumeeventdefinition">ConsumeEventDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>CloudEvent type.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>context</td>
<td>Key-value pairs for CloudEvent context values that must match.</td>
<td>object</td>
<td>no</td>
</tr>
</tbody>
</table>
<h5 id="an-example-definition_1">An example definition</h5>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">wait-for-booking</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">consumeEvent</span>
  <span class="nt">event</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">guestbooking</span>
    <span class="nt">context</span><span class="p">:</span>
      <span class="nt">source</span><span class="p">:</span> <span class="s">&#39;bookings.*&#39;</span>
      <span class="nt">customerId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.customerId)</span>
      <span class="nt">venue</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Sydney</span>
  <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PT1H</span>
  <span class="nt">transform</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.customer)</span>
  <span class="nt">transition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">add-booking-to-database</span>
</code></pre></div>
<p>The ConsumeEvent State is the simplest state you can use to listen for CloudEvents in the middle of a workflow (for triggering a workflow when receiving an event, see <a href="#start">Start</a>). More complex event consumers include <a href="#eventxorstate">EventXor State</a> and the <a href="#eventandstate">EventAnd State</a>.</p>
<p>When a workflow reaches a ConsumeEvent State it will halt its execution until it receives a matching event, where matches are determined according to the <code>type</code> and <code>context</code> parameters. While <code>type</code> is a required string constant, <code>context</code> can include any number of key-value pairs that will be used to filter for a match. The keys for this context field will be checked within the CloudEvent's Context metadata fields for matches. By default, any context value will be treated as a standard Javascript Regex pattern, but <code>jq</code> queries can be performed within a string literal with the <code>jq()</code> funciton. For example: <code>"Hello jq(.name)!"</code></p>
<p>If the <code>timeout</code> is reached without receiving a matching event a <code>direktiv.stateTimeout</code> error will be thrown, which may be caught and handled via <code>catch</code>.</p>
<p>The event payload will stored at a variable with the same name as the event's <code>type</code>. If the payload is not valid JSON it will be base64 encoded as a string first.</p>
<h3 id="delaystate">DelayState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("delay").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>duration</td>
<td>Duration to delay (ISO8601).</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="an-example-definition_2">An example definition</h4>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sleep</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">delay</span>
  <span class="nt">duration</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PT1H</span>
  <span class="nt">transition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">fetch-data</span>
</code></pre></div>
<p>The Delay State pauses execution of the workflow for a predefined length of time.</p>
<h3 id="errorstate">ErrorState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("error").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>error</td>
<td>Error code, catchable on a calling workflow.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>message</td>
<td>Format string to provide more context to the error.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>args</td>
<td>A list of <code>jq</code> commands to generate arguments for substitution in the <code>message</code> format string.</td>
<td>[]string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="an-example-definition_3">An example definition</h4>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">error-out-of-date</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">error</span>
  <span class="nt">error</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">validation.outOfDate</span>
  <span class="nt">message</span><span class="p">:</span> <span class="s">&quot;food</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">%s</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">out</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">date&quot;</span>
  <span class="nt">args</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">jq(.item.name)</span>
</code></pre></div>
<p>The Error State allows a subflow to throw an error, catchable by the calling workflow.</p>
<p>The first transition to an Error State anywhere within the workflow means that a waiting caller -- if one exists -- will receive that error after this subflow returns. This doesn't prevent the Error State from transitioning to other states, which might be necessary to clean up or undo actions performed by the workflow. Subsequent transitions into Error States after the first have no effect.</p>
<p>An error consists of two parts: an error code, and an error message. The code should be a short string can can contain alphanumeric characters, periods, dashes, and underscores. It is good practice to structure error codes similar to domain names, to make them easier to handle. The message allows you to provide extra context, and can be formatted like a <code>printf</code> string where each entry in <code>args</code> will be substituted. The <code>args</code> must be <code>jq</code> commands, allowing the state to insert state information into the error message.</p>
<h3 id="eventandstate">EventAndState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("eventAnd").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>events</td>
<td>Events to consume.</td>
<td><a href="#consumeeventdefinition">[]ConsumeEventDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>timeout</td>
<td>Duration to wait to receive all events (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h5 id="an-example-definition_4">An example definition</h5>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">event-and</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eventAnd</span>
  <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PT1H</span>
  <span class="nt">transition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">done</span>
  <span class="nt">events</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">event</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">purchasePaid</span>
        <span class="nt">context</span><span class="p">:</span>
          <span class="nt">source</span><span class="p">:</span> <span class="s">&#39;purchase.*&#39;</span>
          <span class="nt">customerId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.customerId)</span>
          <span class="nt">country</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Australia</span>
    <span class="p p-Indicator">-</span> <span class="nt">event</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">purchaseSent</span>
        <span class="nt">context</span><span class="p">:</span>
          <span class="nt">source</span><span class="p">:</span> <span class="s">&#39;purchase.*&#39;</span>
          <span class="nt">customerId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.customerId)</span>
          <span class="nt">country</span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">Australia</span>
</code></pre></div>
<p>When a workflow reaches an EventAnd State it will halt its execution until it receives a matching event for every event in its <code>events</code> list, where matches are determined according to the <code>type</code> and <code>context</code> parameters. While <code>type</code> is a required string constant, <code>context</code> can include any number of key-value pairs that will be used to filter for a match. The keys for this context field will be checked within the CloudEvent's Context metadata fields for matches. By default, any context value will be treated as a standard Javascript Regex pattern, but <code>jq</code> queries can be performed within a string literal with the <code>jq()</code> funciton. For example: <code>"Hello jq(.name)!"</code></p>
<p>If the <code>timeout</code> is reached without receiving matches for all required events a <code>direktiv.stateTimeout</code> error will be thrown, which may be caught and handled via <code>catch</code>.</p>
<p>The event payloads will stored in variables with the same names as each event's <code>type</code>. If a payload is not valid JSON it will be base64 encoded as a string first.</p>
<h3 id="eventxorstate">EventXorState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("eventXor").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>events</td>
<td>Events to consume, and what to do based on which event was received.</td>
<td><a href="#eventconditiondefinition">[]EventConditionDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>timeout</td>
<td>Duration to wait to receive event (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="eventconditiondefinition">EventConditionDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>event</td>
<td>Event to consume.</td>
<td><a href="#consumeeventdefinition">ConsumeEventDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to if this branch is selected.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
</tbody>
</table>
<h5 id="an-example-definition_5">An example definition</h5>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">event-xor</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eventXor</span>
  <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PT1H</span>
  <span class="nt">events</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">transition</span><span class="p">:</span> <span class="s">&quot;reservation-accept&quot;</span>
      <span class="nt">event</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reservationAccept</span>
        <span class="nt">context</span><span class="p">:</span>
          <span class="nt">source</span><span class="p">:</span> <span class="s">&quot;reservation.*&quot;</span>
          <span class="nt">guestName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.guestName)</span>
          <span class="nt">venue</span><span class="p">:</span> <span class="s">&quot;Compu</span><span class="nv"> </span><span class="s">Global</span><span class="nv"> </span><span class="s">HMN&quot;</span>
    <span class="p p-Indicator">-</span> <span class="nt">transition</span><span class="p">:</span> <span class="s">&quot;reservation-decline&quot;</span>
      <span class="nt">event</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reservationDecline</span>
        <span class="nt">context</span><span class="p">:</span>
          <span class="nt">source</span><span class="p">:</span> <span class="s">&quot;reservation.*&quot;</span>
          <span class="nt">guestName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.guestName)</span>
          <span class="nt">venue</span><span class="p">:</span> <span class="s">&quot;Compu</span><span class="nv"> </span><span class="s">Global</span><span class="nv"> </span><span class="s">HMN&quot;</span>
</code></pre></div>
<p>When a workflow reaches an EventXor State it will halt its execution until it receives any matching event in its <code>events</code> list, where matches are determined according to the <code>type</code> and <code>context</code> parameters. While <code>type</code> is a required string constant, <code>context</code> can include any number of key-value pairs that will be used to filter for a match. The keys for this context field will be checked within the CloudEvent's Context metadata fields for matches. By default, any context value will be treated as a standard Javascript Regex pattern, but <code>jq</code> queries can be performed within a string literal with the <code>jq()</code> funciton. For example: <code>"Hello jq(.name)!"</code></p>
<p>If the <code>timeout</code> is reached without receiving matches for any required event a <code>direktiv.stateTimeout</code> error will be thrown, which may be caught and handled via <code>catch</code>.</p>
<p>The received event payload will stored in a variable with the same name as its event <code>type</code>. If a payload is not valid JSON it will be base64 encoded as a string first.</p>
<h3 id="foreachstate">ForeachState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("foreach").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>array</td>
<td><code>jq</code> command to produce an array of objects to loop through.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>action</td>
<td>Action to perform.</td>
<td><a href="#actiondefinition">ActionDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>timeout</td>
<td>Duration to wait for all actions to complete (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<p>The ForeachState can be used to split up state data into an array and then perform an action on each element in parallel.</p>
<p>The <code>jq</code> command provided in the <code>array</code> must produce an array or a <code>direktiv.foreachInput</code> error will be thrown. The <code>jq</code> command used to generate the <code>input</code> for the <code>action</code> will be applied to a single element from that array.</p>
<p>The return values of each action will be included in an array stored at <code>.return</code> at the same index from which its input was generated.</p>
<h3 id="generateeventstate">GenerateEventState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("generateEvent").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>event</td>
<td>Event to generate.</td>
<td><a href="#generateeventdefinition">GenerateEventDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>delay</td>
<td>Duration to wait before publishing event (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="generateeventdefinition">GenerateEventDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>CloudEvent type.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>source</td>
<td>CloudEvent source.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>data</td>
<td>A <code>jq</code> command to generate the data (payload) for the produced event.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>datacontenttype</td>
<td>An RFC 2046 string specifying the payload content type.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>context</td>
<td>Add additional event extension context attributes (key-value).</td>
<td>object</td>
<td>no</td>
</tr>
</tbody>
</table>
<p>The GenerateEvent State will produce an event that other workflows could listen for.</p>
<p>If the optional <code>datacontenttype</code> is defined and set to something other than <code>application/json</code>, and the <code>jq</code> command defined in <code>data</code> produces a base64 encoded string, it will be decoded before being used as the event payload.</p>
<h3 id="getterstate">GetterState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("getter").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>variables</td>
<td>Variables to fetch.</td>
<td><a href="#variablegetterdefinition">[]VariableGetterDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="variablegetterdefinition">VariableGetterDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>Variable name.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>scope</td>
<td>Variable scope ("instance", "workflow", or "namespace").</td>
<td>string</td>
<td>yes</td>
</tr>
</tbody>
</table>
<p>The getter state is used to retrieve persistent data.</p>
<h3 id="noopstate">NoopState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("noop").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="an-example-definition_6">An example definition</h4>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hello</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">noop</span>
  <span class="nt">transform</span><span class="p">:</span>
    <span class="nt">message</span><span class="p">:</span> <span class="s">&quot;Hello&quot;</span>
  <span class="nt">transition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">world</span>
</code></pre></div>
<p>The No-op State exists for when nothing more than generic state functionality is required. A common use-case would be to perform a <code>jq</code> operation on the state data without performing another operation.</p>
<h3 id="parallelstate">ParallelState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("parallel").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>actions</td>
<td>Actions to perform.</td>
<td><a href="#actiondefinition">[]ActionDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>mode</td>
<td>Option types on how to complete branch execution: "and" (default), or "or".</td>
<td>enum</td>
<td>no</td>
</tr>
<tr>
<td>timeout</td>
<td>Duration to wait for all actions to complete (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<p>The Parallel State is an expansion on the <a href="#actionstate">Action State</a>, used for running multiple actions in parallel.</p>
<p>The state can operate in two different modes: <code>and</code> and <code>or</code>. In <code>and</code> mode all actions must return successfully before completing. In <code>or</code> mode the state can complete as soon as any one action returns without error.</p>
<p>Return values from each of the actions will be stored in an array at <code>.return</code> in the order that each action is defined. If an action doesn't return but the state can still complete without errors any missing return values will be <code>null</code> in the array.</p>
<p>If the <code>timeout</code> is reached before the state can transition a <code>direktiv.stateTimeout</code> error will be thrown, which may be caught and handled via <code>catch</code>. Any actions still running when the state transitions will be cancelled with "best effort" attempts.</p>
<h3 id="setterstate">SetterState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("setter").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>variables</td>
<td>Variables to push.</td>
<td><a href="#variablesetterdefinition">[]VariableSetterDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="variablesetterdefinition">VariableSetterDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>Variable name.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>scope</td>
<td>Variable scope ("instance", "workflow", or "namespace").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>value</td>
<td><code>jq</code> command to generate variable value.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>mimeType</td>
<td>MimeType to store variable value as.</td>
<td>string</td>
<td>no</td>
</tr>
</tbody>
</table>
<p>The setter state is used to store persistent data. A mimeType type can be provided to specify the type of content a variable is. If mimeType is not provided it will default to <code>application/json</code>. There are three mimeType's that are specifcically handled:
* application/json - Default behaviour, value is treated as a json object.
* text/plain - Value is treated as a plaintext string, no json marshalling is done.
* application/octet-stream - Value is expected to be a base64 string and is stored as its decoded binary value.
Read more about mimeTyps in the <a href="../examples/variable-mime-types/">Examples</a>.</p>
<h3 id="switchstate">SwitchState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("switch").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>conditions</td>
<td>Conditions to evaluate and determine which state to transition to next.</td>
<td><a href="#switchconditiondefinition">[]SwitchConditionDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>defaultTransition</td>
<td>State to transition to next if no conditions are matched.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>defaultTransform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="switchconditiondefinition">SwitchConditionDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>condition</td>
<td><code>jq</code> command evaluated against state data. True if results are not empty.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to if this branch is selected.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
</tbody>
</table>
<h5 id="an-example-definition_7">An example definition</h5>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">decision</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">switch</span>
  <span class="nt">conditions</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">condition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.patient.contactInfo.mobile)</span>
    <span class="nt">transition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">sms</span>
    <span class="nt">transform</span><span class="p">:</span> <span class="s">&#39;jq(.</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">phone:</span><span class="nv"> </span><span class="s">.contact.mobile)&#39;</span>
  <span class="p p-Indicator">-</span> <span class="nt">condition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jq(.patient.contactInfo.landline)</span>
    <span class="nt">transition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">call</span>
    <span class="nt">transform</span><span class="p">:</span> <span class="s">&#39;jq(.</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">{</span><span class="nv"> </span><span class="s">phone:</span><span class="nv"> </span><span class="s">.contact.landline</span><span class="nv"> </span><span class="s">})&#39;</span>
  <span class="nt">defaultTransition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">email</span>
</code></pre></div>
<p>The Switch State is used to perform conditional transitions based on the current state information. A <code>condition</code> can be any <code>jq</code> command. The command will be run on the current state information and a result of anything other than <code>null</code>, <code>false</code>, <code>{}</code>, <code>[]</code>, <code>""</code>, or <code>0</code> will cause the condition to be considered a match.</p>
<p>The list of conditions is evaluated in-order and the first match determines what happens next. If no conditions are matched the <code>defaultTransition</code> will be used.</p>
<h3 id="validatestate">ValidateState</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>State unique identifier.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>type</td>
<td>State type ("validate").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>subject</td>
<td><code>jq</code> command to select the subject of the schema validation. Defaults to '.' if unspecified.</td>
<td>no</td>
<td>string</td>
</tr>
<tr>
<td>schema</td>
<td>Name of the referenced state data schema.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>transform</td>
<td><code>jq</code> command to transform the state's data output.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>transition</td>
<td>State to transition to next.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>retries</td>
<td>Retry policy.</td>
<td><a href="#retrydefinition">RetryDefinition</a></td>
<td>no</td>
</tr>
<tr>
<td>catch</td>
<td>Error handling.</td>
<td><a href="#errordefinition">[]ErrorDefinition</a></td>
<td>no</td>
</tr>
</tbody>
</table>
<h4 id="an-example-definition_8">An example definition</h4>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">validate-input</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">validate</span>
  <span class="nt">schema</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
    <span class="nt">required</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">additionalProperties</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
  <span class="nt">transition</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">process-request</span>
</code></pre></div>
<p>This schema is based off the following JSON Schema:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
   <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
   <span class="nt">&quot;required&quot;</span><span class="p">:[</span>
      <span class="s2">&quot;name&quot;</span>
   <span class="p">],</span>
   <span class="nt">&quot;properties&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:{</span>
         <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span>
      <span class="p">}</span>
   <span class="p">},</span>
   <span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="kc">false</span>
<span class="p">}</span>
</code></pre></div>
<p>The Validate State can be used to validate the structure of the state's data. The schema field takes a yaml-ified representation of a JSON Schema document.</p>
<h2 id="timeoutdefinition">TimeoutDefinition</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>interrupt</td>
<td>Duration to wait before triggering a timeout error in the workflow (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>kill</td>
<td>Duration to wait before killing the workflow (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
</tbody>
</table>
<h2 id="start">Start</h2>
<h3 id="scheduledstartdefinition">ScheduledStartDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>Start type ("scheduled").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>state</td>
<td>ID of the state to use as the start state.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>cron</td>
<td>Cron expression to schedule workflow.</td>
<td>string</td>
<td>no</td>
</tr>
</tbody>
</table>
<h3 id="eventstartdefinition">EventStartDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>Start type ("event").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>state</td>
<td>ID of the state to use as the start state.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>event</td>
<td>Event to listen for, which can trigger the workflow.</td>
<td><a href="#consumeeventdefinition">StartEventDefinition</a></td>
<td>yes</td>
</tr>
</tbody>
</table>
<h4 id="starteventdefinition">StartEventDefinition</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>CloudEvent type.</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>filters</td>
<td>Key-value regex pairs for CloudEvent context values that must match.</td>
<td>object</td>
<td>no</td>
</tr>
</tbody>
</table>
<h3 id="eventsxorstartdefinition">EventsXorStartDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>Start type ("eventsXor").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>state</td>
<td>ID of the state to use as the start state.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>events</td>
<td>Event to listen for, which can trigger the workflow.</td>
<td><a href="#starteventdefinition">[]StartEventDefinition</a></td>
<td>yes</td>
</tr>
</tbody>
</table>
<h3 id="eventsandstartdefinition">EventsAndStartDefinition</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td>Start type ("eventsAnd").</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>state</td>
<td>ID of the state to use as the start state.</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>events</td>
<td>Event to listen for, which can trigger the workflow.</td>
<td><a href="#starteventdefinition">[]StartEventDefinition</a></td>
<td>yes</td>
</tr>
<tr>
<td>lifespan</td>
<td>Maximum duration an event can be stored before being discarded while waiting for other events (ISO8601).</td>
<td>string</td>
<td>no</td>
</tr>
<tr>
<td>correlate</td>
<td>Context keys that must exist on every event and have matching values to be grouped together.</td>
<td>[]string</td>
<td>no</td>
</tr>
</tbody>
</table>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../installation/summary/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quick Install" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Quick Install
            </div>
          </div>
        </a>
      
      
        
        <a href="../api/" class="md-footer__link md-footer__link--next" aria-label="Next: API" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              API
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2021 direktiv.io
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/direktiv_io" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
      <a href="https://github.com/direktiv/direktiv" target="_blank" rel="noopener" title="Direktiv on Github" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
      <a href="https://direktivio.slack.com/" target="_blank" rel="noopener" title="Slack" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tracking", "navigation.tabs.sticky", "navigation.top", "navigation.indexes"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>